(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fae70fe"],{"13d5":function(e,t,a){"use strict";var i=a("23e7"),n=a("d58f").left,r=a("a640"),l=a("ae40"),o=r("reduce"),s=l("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!s},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1c18":function(e,t,a){},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function l(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var i=o(),n=e-i,s=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=s;var o=Math.easeInOutQuad(c,i,n,t);l(o),c<t?r(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,p=(a("e498"),a("2877")),d=Object(p["a"])(u,i,n,!1,null,"6af373ef",null);t["a"]=d.exports},"90fe":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"产品名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),a("el-select",{staticClass:"filter-item",staticStyle:{width:"340px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},e._l(e.productOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name+"("+e.key+")",value:e.key}})})),1),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(" 添加 ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),a("el-table-column",{attrs:{label:"产品名称",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.customer_name))]}}])}),a("el-table-column",{attrs:{label:"产品Key",width:"330",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.product_key))])]}}])}),a("el-table-column",{attrs:{label:"产品类型",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.product_type||"云音箱"))]}}])}),a("el-table-column",{attrs:{label:"在线设备数",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.online||0))]}}])}),a("el-table-column",{attrs:{label:"设备总数",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.device_counts||0))]}}])}),a("el-table-column",{attrs:{label:"license数",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.pageviews||0))]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"340","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t,i){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleSelect(t.row)}}},[e._v("查看")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id,i)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.fetchData}}),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名称",prop:"product_name"}},[a("el-input",{model:{value:e.temp.product_name,callback:function(t){e.$set(e.temp,"product_name",t)},expression:"temp.product_name"}})],1),a("el-form-item",{attrs:{label:"产品类型",prop:"product_type"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.temp.product_type,callback:function(t){e.$set(e.temp,"product_type",t)},expression:"temp.product_type"}},e._l(e.productType,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.display_name}})})),1)],1),a("el-form-item",{attrs:{label:"客户名称",prop:"customer_name"}},[a("el-input",{model:{value:e.temp.customer_name,callback:function(t){e.$set(e.temp,"customer_name",t)},expression:"temp.customer_name"}})],1),a("el-form-item",{attrs:{label:"节点类型",prop:"node_type"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.temp.node_type,callback:function(t){e.$set(e.temp,"node_type",t)},expression:"temp.node_type"}},e._l(e.calendarTypeOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.display_name}})})),1)],1),a("el-form-item",{attrs:{label:"连网方式",prop:"link_type"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.temp.link_type,callback:function(t){e.$set(e.temp,"link_type",t)},expression:"temp.link_type"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.display_name}})})),1)],1),a("el-form-item",{attrs:{label:"描述信息"}},[a("el-input",{attrs:{autosize:{minRows:0,maxRows:4},type:"textarea",placeholder:"请描述该产品的用途"},model:{value:e.temp.description,callback:function(t){e.$set(e.temp,"description",t)},expression:"temp.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(" 提交 ")])],1)],1),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.editFormVisible},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名称",prop:"product_name"}},[a("el-input",{model:{value:e.temp.product_name,callback:function(t){e.$set(e.temp,"product_name",t)},expression:"temp.product_name"}})],1),a("el-form-item",{attrs:{label:"产品名称",prop:"product_type"}},[a("el-input",{model:{value:e.temp.product_type,callback:function(t){e.$set(e.temp,"product_type",t)},expression:"temp.product_type"}})],1),a("el-form-item",{attrs:{label:"客户名称",prop:"customer_name"}},[a("el-input",{model:{value:e.temp.customer_name,callback:function(t){e.$set(e.temp,"customer_name",t)},expression:"temp.customer_name"}})],1),a("el-form-item",{attrs:{label:"描述信息"}},[a("el-input",{attrs:{autosize:{minRows:0,maxRows:4},type:"textarea",placeholder:"请描述该产品的用途"},model:{value:e.temp.description,callback:function(t){e.$set(e.temp,"description",t)},expression:"temp.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(" 提交 ")])],1)],1),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.viewFormVisible},on:{"update:visible":function(t){e.viewFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名称",prop:"product_name"}},[a("el-input",{model:{value:e.temp.product_name,callback:function(t){e.$set(e.temp,"product_name",t)},expression:"temp.product_name"}})],1),a("el-form-item",{attrs:{label:"产品key",prop:"link_type"}},[a("el-input",{model:{value:e.temp.product_key,callback:function(t){e.$set(e.temp,"product_key",t)},expression:"temp.product_key"}})],1),a("el-form-item",{attrs:{label:"产品密钥",prop:"link_type"}},[a("el-input",{model:{value:e.temp.product_secret,callback:function(t){e.$set(e.temp,"product_secret",t)},expression:"temp.product_secret"}})],1),a("el-form-item",{attrs:{label:"客户名称",prop:"customer_name"}},[a("el-input",{model:{value:e.temp.customer_name,callback:function(t){e.$set(e.temp,"customer_name",t)},expression:"temp.customer_name"}})],1),a("el-form-item",{attrs:{label:"节点类型",prop:"node_type"}},[a("el-input",{model:{value:e.temp.node_type,callback:function(t){e.$set(e.temp,"node_type",t)},expression:"temp.node_type"}})],1),a("el-form-item",{attrs:{label:"连网方式",prop:"link_type"}},[a("el-input",{model:{value:e.temp.link_type,callback:function(t){e.$set(e.temp,"link_type",t)},expression:"temp.link_type"}})],1),a("el-form-item",{attrs:{label:"描述信息"}},[a("el-input",{attrs:{autosize:{minRows:0,maxRows:4},type:"textarea",placeholder:"请描述该产品的用途"},model:{value:e.temp.description,callback:function(t){e.$set(e.temp,"description",t)},expression:"temp.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.viewFormVisible=!1}}},[e._v(" 关闭 ")])],1)],1)],1)},n=[],r=(a("13d5"),a("a434"),a("c740"),a("ad8f")),l=a("b775");function o(e){return Object(l["a"])({url:"/table/list",method:"get",params:e})}function s(){return Object(l["a"])({url:"/table/product/type_list",method:"get",params:{}})}function c(e){return Object(l["a"])({url:"/table/delete",method:"get",params:{id:e}})}function u(e){return Object(l["a"])({url:"/ali/create_product",method:"post",data:e})}function p(e){return Object(l["a"])({url:"/table/update",method:"post",data:e})}var d=a("333d"),m=[{key:"0",display_name:"设备"},{key:"1",display_name:"网关"}],f=[{key:"FISE",display_name:"沸石"},{key:"ALiYun",display_name:"阿里云"}],y=[{key:"1",display_name:"wifi"},{key:"2",display_name:"蜂窝网"},{key:"3",display_name:"以太网"},{key:"4",display_name:"LoRaWAN"},{key:"5",display_name:"其他"}],h=m.reduce((function(e,t){return e[t.key]=t.display_name,e}),{}),_=(f.reduce((function(e,t){return e[t.key]=t.display_name,e}),{}),y.reduce((function(e,t){return e[t.key]=t.display_name,e}),{}),{components:{Pagination:d["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]},typeFilter:function(e){return h[e]}},data:function(){return{list:null,total:0,calendarTypeOptions:m,productOptions:f,productType:[],statusOptions:y,listQuery:{page:1,limit:20,importance:void 0,title:"",type:void 0,sort:"+id"},textMap:{update:"编辑产品",create:"创建产品"},temp:{description:"",product_name:"",node_type:"",link_type:"",customer_name:"",product_key:"",product_secret:"",product_type:""},dialogStatus:"",dialogFormVisible:!1,editFormVisible:!1,viewFormVisible:!1,listLoading:!0,rules:{node_type:[{required:!0,message:"节点类型是必填",trigger:"change"}],link_type:[{required:!0,message:"请选择联网方式",trigger:"change"}],product_name:[{required:!0,message:"产品名称必填且唯一",trigger:"blur"}],customer_name:[{required:!0,message:"客户名称是必填,没有请填FISE",trigger:"blur"}],product_type:[{required:!0,message:"产品类型是必填",trigger:"blur"}]}}},created:function(){this.getList(),this.get_product_type_list()},methods:{resetTemp:function(){this.temp={description:"",product_name:"",node_type:"",link_type:"",customer_name:"",product_key:"",product_secret:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&u(e.temp).then((function(t){e.temp.product_key=t.data.product_key,e.temp.id=t.data.id,e.list.unshift(e.temp),e.dialogFormVisible=!1,e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3})}))}))},handleDelete:function(e,t){c(e).then((function(e){})),this.list.splice(t,1),this.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3})},handleUpdate:function(e){var t=this;this.temp=Object.assign({},e),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.editFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleSelect:function(e){var t=this;this.temp=Object.assign({},e),this.temp.timestamp=new Date(this.temp.timestamp),this.dialogStatus="update",this.viewFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=Object.assign({},e.temp);p(a).then((function(){var t=e.list.findIndex((function(t){return t.id===e.temp.id}));e.list.splice(t,1,e.temp),e.editFormVisible=!1,e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}))}}))},fetchData:function(){var e=this;this.listLoading=!0,Object(r["a"])(this.listQuery).then((function(t){e.list=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),1500)}))},getList:function(){var e=this;this.listLoading=!0,o(this.listQuery).then((function(t){e.list=t.data,e.total=t.total,setTimeout((function(){e.listLoading=!1}),1500)}))},get_product_type_list:function(){var e=this;s(this.listQuery).then((function(t){e.productType=t.data,e.productType.reduce((function(e,t){return e[t.key]=t.display_name,e}),{})}))},handleFilter:function(){this.listQuery.page=1,this.fetchData()}}}),g=_,b=a("2877"),v=Object(b["a"])(g,i,n,!1,null,null,null);t["default"]=v.exports},a434:function(e,t,a){"use strict";var i=a("23e7"),n=a("23cb"),r=a("a691"),l=a("50c4"),o=a("7b0b"),s=a("65f0"),c=a("8418"),u=a("1dde"),p=a("ae40"),d=u("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,y=Math.min,h=9007199254740991,_="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var a,i,u,p,d,m,g=o(this),b=l(g.length),v=n(e,b),k=arguments.length;if(0===k?a=i=0:1===k?(a=0,i=b-v):(a=k-2,i=y(f(r(t),0),b-v)),b+a-i>h)throw TypeError(_);for(u=s(g,i),p=0;p<i;p++)d=v+p,d in g&&c(u,p,g[d]);if(u.length=i,a<i){for(p=v;p<b-i;p++)d=p+i,m=p+a,d in g?g[m]=g[d]:delete g[m];for(p=b;p>b-i+a;p--)delete g[p-1]}else if(a>i)for(p=b-i;p>v;p--)d=p+i-1,m=p+a-1,d in g?g[m]=g[d]:delete g[m];for(p=0;p<a;p++)g[p+v]=arguments[p+2];return g.length=b-i+a,u}})},a9e3:function(e,t,a){"use strict";var i=a("83ab"),n=a("da84"),r=a("94ca"),l=a("6eeb"),o=a("5135"),s=a("c6b6"),c=a("7156"),u=a("c04e"),p=a("d039"),d=a("7c73"),m=a("241c").f,f=a("06cf").f,y=a("9bf2").f,h=a("58a8").trim,_="Number",g=n[_],b=g.prototype,v=s(d(b))==_,k=function(e){var t,a,i,n,r,l,o,s,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+c}for(r=c.slice(2),l=r.length,o=0;o<l;o++)if(s=r.charCodeAt(o),s<48||s>n)return NaN;return parseInt(r,i)}return+c};if(r(_,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,x=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof x&&(v?p((function(){b.valueOf.call(a)})):s(a)!=_)?c(new g(k(t)),a,x):k(t)},S=i?m(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;S.length>F;F++)o(g,w=S[F])&&!o(x,w)&&y(x,w,f(g,w));x.prototype=b,b.constructor=x,l(n,_,x)}},ad8f:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("b775");function n(e){return Object(i["a"])({url:"/table/list",method:"get",params:e})}},c740:function(e,t,a){"use strict";var i=a("23e7"),n=a("b727").findIndex,r=a("44d2"),l=a("ae40"),o="findIndex",s=!0,c=l(o);o in[]&&Array(1)[o]((function(){s=!1})),i({target:"Array",proto:!0,forced:s||!c},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},d58f:function(e,t,a){var i=a("1c0b"),n=a("7b0b"),r=a("44ad"),l=a("50c4"),o=function(e){return function(t,a,o,s){i(a);var c=n(t),u=r(c),p=l(c.length),d=e?p-1:0,m=e?-1:1;if(o<2)while(1){if(d in u){s=u[d],d+=m;break}if(d+=m,e?d<0:p<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:p>d;d+=m)d in u&&(s=a(s,u[d],d,c));return s}};e.exports={left:o(!1),right:o(!0)}},e498:function(e,t,a){"use strict";a("1c18")}}]);